/*
 *	PopUp.min.js
 *
 *	Speedo PopUp v1.2
 *
 *	Speedo PopUp is a lightweight jQuery plugin
 *	with powerful customization settings.
 *
 *	http://www.speedoproducts.com
 *	http://www.artflow.ro
 *	http://www.agapastudio.com
 *
 *	Copyright (c) 2012-2013 By Artflow & Agapastudio.All rights reserved.
 *
 *	License:
 *		http://www.speedoproducts.com/speedo-popup/license.php
 */
(function(d){function J(a){function k(h,c,f,e,p){if(c&&"none"!=c&&(!x||9<x)){var q=function(){d.isFunction(p)&&p();b.unbind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",q)};b.bind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",q);f?(b.show(),j&&j.show(),d("body").addClass("speedo-effect-"+c.toLowerCase()+"-active"),b.removeClass("speedo-effect-"+c.toLowerCase()+"-reverse"),b.addClass("speedo-effect-"+c.toLowerCase()+"-normal")):(d("body").removeClass("speedo-effect-"+
c.toLowerCase()+"-active"),b.addClass("speedo-effect-"+c.toLowerCase()+"-reverse"),b.removeClass("speedo-effect-"+c.toLowerCase()+"-normal"),j&&!e&&j.hide());b.css({"-webkit-animation-play-state":"running","-moz-animation-play-state":"running","-o-animation-play-state":"running","-ms-animation-play-state":"running","animation-play-state":"running"});return!0}return h&&"none"!=h?(d.isFunction(h)?a.overlay?h(b.get(0),j.get(0)):h(b.get(0)):d.isArray(h)?g.animatePopup(h[0],h[1],f,p):g.animatePopup(h,
"slow",f,p),!0):!1}function l(b){b=b?b:a.href;y=!1;if((null==b||""==b)&&a.htmlContent)return"html";if(b.match(J))return"image";var c="";d.each(K,d.proxy(function(e,d){if(b.split("?")[0].match(d.regex)){if(d.token){"vimeo"==e&&"video"==b.split("/")[3]&&(d.index=4);var f=b.split(d.token)[d.index].split("?")[0].split("&")[0];b=d.url.replace("{id}",f)}a.width=a.width?a.width:640;a.height=a.height?a.height:360;a.href=b;y=!0;c=d.iframe?"iframe":"flash"}},this));if(""==c){a.useFrame||0<=b.indexOf("http")?
(c="iframe",y=!0,a.href=b):c="ajax";var f=b.indexOf("#");-1!=f&&(f=b.substr(f),f=d(f),0<f.length&&(c="html",a.htmlContent=f.html()))}return c}function m(a){27==(a.keyCode||a.charCode||a.which)&&g.hidePopup()}function L(a){var c=b.position();a={startX:a.clientX,startY:a.clientY,offset:c};d(window).bind("mousemove",a,F).bind("mouseup",H)}function F(a){var c=a.data.offset;b.css({left:a.clientX-a.data.startX+c.left,top:a.clientY-a.data.startY+c.top})}function H(){d(window).unbind("mousemove",F).unbind("mouseup",
H)}var g=this,t=0,v=0,n=0,r=0,z=a.groupIndex,A=0,b=null,B=null,w=null,s=null,I=null,j=null,u=null,C=null,D=null,G=null,E=null,y=!1,J=/\.(jpg|jpeg|gif|png|bmp|tiff)(.*)?$/i,K={swf:{regex:/[^\.]\.(swf)\s*$/i},youtube:{regex:/youtube\.com\/watch/i,url:"http://www.youtube.com/embed/{id}?autoplay=1&amp;fs=1&amp;rel=0",token:"=",iframe:1,index:1},google:{regex:/google\.com\/videoplay/i,url:"http://video.google.com/googleplayer.swf?autoplay=1&amp;hl=en&amp;docId={id}",token:"=",index:1},vimeo:{regex:/vimeo\.com/i,
url:"http://player.vimeo.com/video/{id}?hd=1&amp;autoplay=1&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1",token:"/",iframe:1,index:3},metacafe:{regex:/metacafe\.com\/watch/i,url:"http://www.metacafe.com/fplayer/{id}/.swf?playerVars=autoPlay=yes",token:"/",index:4},dailymotion:{regex:/dailymotion\.com\/video/i,url:"http://www.dailymotion.com/swf/video/{id}?additionalInfos=0&amp;autoStart=1",token:"/",index:4},wordpress:{regex:/v.wordpress.com/i,url:"http://s0.videopress.com/player.swf?guid={id}&amp;v=1.01",
token:"/",index:3}};this.instanceName="instance_"+5233*Math.random();this.createPopup=function(){a.theme=a.theme.toLowerCase();var h=a.theme&&"default"!=a.theme?" speedo-theme-"+a.theme:"";if(0<a.startCount){var c;a:{c=document.cookie.split(";");for(var f="",e="",e=[],p=0;p<c.length;p++)if(e=c[p].split("="),f=e[0].replace(/^\s+|\s+$/g,""),e=e[1],"speedo-popup-start-count"==f){c=unescape(e);break a}c=null}c=c?c:0;if(c>=a.startCount)return;c++;f=a.interval;p=new Date;p.setDate(p.getDate()+f);c=escape(c)+
(null==f?"":"; expires="+p.toUTCString());document.cookie="speedo-popup-start-count="+c}d("body").addClass("speedo-popup-ready");b=d(document.createElement("div"));b.addClass("speedo-container"+h);a.css3Effects&&"none"!=a.css3Effects&&b.addClass("speedo-effect-"+a.css3Effects.toLowerCase());b.css({display:"none",width:a.width?a.width:"auto",height:a.height?a.height:"auto","min-width":150,"min-height":150,left:"center"==a.left?"50%":a.left,top:"center"==a.top?"50%":a.top});b.appendTo("body");a.draggable&&
(I=d(document.createElement("div")),I.addClass("speedo-popup-drag-area"),I.bind("mousedown",L),b.append(I));a.caption&&""!=a.caption&&(c=d(document.createElement("p")),c.addClass("speedo-popup-caption"),c.html(a.caption),b.append(c));w=d(document.createElement("div"));w.addClass("speedo-popup-loading");b.append(w);s=d(document.createElement("div"));s.addClass("speedo-content-holder");s.appendTo(b);var q;c=a.buttons;if(d.isArray(c)&&0<c.length){f=["html","action"];p=d(document.createElement("div"));
p.addClass("speedo-popup-custom-buttons");for(e=0;e<c.length;e++){var k=d(document.createElement("a"));k.attr("href","javascript: void(0);");c[e].html&&k.html(c[e].html);for(q in c[e])-1==f.indexOf(q)&&k.attr(q,c[e][q]);d.isFunction(c[e].action)&&k.click(c[e].action);p.append(k)}q=p}else q=!1;!1!==q&&b.append(q);q=l();g.setContent("html"!=q?a.href:a.htmlContent,q);a.groupGallery&&1<a.groupGallery.length&&(u=d(document.createElement("a")),u.attr("href","javascript: void(0);"),u.attr("title","Play/Pause"),
u.addClass("speedo-popup-playpause-button play"),u.click(function(){g.playContent()}),b.append(u),D=d(document.createElement("a")),D.attr("href","javascript: void(0);"),D.attr("title","Previous"),D.addClass("speedo-popup-previous-button"),D.click(function(){g.prevContent()}),b.append(D),C=d(document.createElement("a")),C.attr("href","javascript: void(0);"),C.attr("title","Next"),C.addClass("speedo-popup-next-button"),C.click(function(){g.nextContent()}),b.append(C),G=d(document.createElement("p")),
G.addClass("speedo-popup-group-caption"),b.append(G),E=d(document.createElement("p")),E.addClass("speedo-popup-group-count"),E.text(z+1+"/"+a.groupGallery.length),b.append(E));a.close&&(B=d(document.createElement("a")),B.addClass("speedo-ui-close"),B.attr("href","javascript: void(0);"),B.click(function(b){a.onClose(b);g.hidePopup();g.playContent(!1)}),B.html(a.closeCaption),b.append(B));a.overlay&&(j=d(document.createElement("div")),j.addClass("speedo-overlay"+h),j.appendTo("body"),"object"==typeof a.overlay&&
d.extend({opacity:0.7,zindex:1E4},a.overlay),a.overlayClose&&j.click(function(b){a.onClose(b);g.hidePopup();g.playContent(!1)}));a.onBeforeShow(b.get(0));g.centerPopup();d(window).resize(function(){g.centerPopup()});g.showPopup();a.groupAutoPlay&&g.playContent(!0);setTimeout(function(){g.centerPopup()},100)};this.init=function(){a.esc&&d(document).bind("keydown",m)};this.showPopup=function(){if(y){var h=l();g.setContent(a.href,h)}if(void 0!=d.speedoPopup.smartSkins[a.theme])d.speedoPopup.smartSkins[a.theme](j,
b);k(a.effectIn,a.css3Effects,!0)||(b.show(),j&&j.show());g.centerPopup();a.onShow(b.get(0));a.autoClose&&setTimeout(function(){g.hidePopup()},a.autoClose)};this.hidePopup=function(){k(a.effectOut,a.css3Effects,!1,!1,function(){y&&s.html(" ");j&&j.hide();b.hide();a.unload&&(j&&j.remove(),b.remove())})||(b.hide(),j&&j.hide(),y&&s.html(" "),a.unload&&(j&&j.remove(),b.remove()));a.onHide(b.get(0))};this.centerPopup=function(){0>=n&&(n=b.width(),r=b.height(),150<n&&b.css({"max-width":n,"max-height":r}));
if(a.responsive){var h=d(window).width(),c=d(window).height(),f=b.outerWidth(),e=b.outerHeight(),g=parseInt(b.css("padding-left"))+parseInt(b.css("padding-right")),j=parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom"));if(h<n+g+t||c<r+j+v){var g=parseInt(b.css("margin-left"))+parseInt(b.css("margin-right")),j=parseInt(b.css("margin-top"))+parseInt(b.css("margin-bottom")),k=b.width(),l=b.height();b.css({width:h-(f+g-k),height:c-(e+j-l)})}}t="center"==a.left?Math.floor(d(window).width()/
2)-b.outerWidth()/2:a.left;v="center"==a.top?Math.floor(d(window).height()/2)-b.outerHeight()/2:a.top;b.css({left:t,top:v})};this.animatePopup=function(a,c,f,e){e=d.isFunction(e)?e:function(){};f&&(b.hide(),j&&j.hide());switch(a){case "slideLeft":f?(b.css("left",-n),b.stop().animate({left:t,opacity:"toggle"},c,e)):b.stop().animate({left:-n,opacity:"toggle"},c,e);break;case "slideRight":f?(b.css("left",d(window).width()+n),b.stop().animate({left:t,opacity:"toggle"},c,e)):b.stop().animate({left:d(window).width()+
n,opacity:"toggle"},c,e);break;case "slideTop":f?(b.css("top",-r),b.stop().animate({top:v,opacity:"toggle"},c,e)):b.stop().animate({top:-r,opacity:"toggle"},c,e);break;case "slideBottom":f?(b.css("top",d(window).height()+r),b.stop().animate({top:v,opacity:"toggle"},c,e)):b.stop().animate({top:d(window).height()+r,opacity:"toggle"},c,e);break;case "slideZoom":f?(b.css("top",-r),b.css("left",t+n/2),b.stop().animate({width:"toggle",left:t,top:v,opacity:"toggle"},c,e)):b.stop().animate({top:-r,left:t+
n/2,width:"toggle",opacity:"toggle"},c,e);break;case "growBox":b.stop().animate({width:"toggle",height:"toggle"},e);break;case "incerto":f?(b.css("left",t+n/2),b.stop().animate({width:"toggle",left:t},c,e),b.css("top",v+r/2),b.animate({top:v},c,e)):(b.stop().animate({top:v+r/2},c,e),b.animate({width:"toggle",left:t+n/2},c,e));break;default:a=f?"fadeIn":"fadeOut",b.stop(),b[a](c,e)}j&&j.stop().animate({opacity:"toggle"},c,function(){null!=x&&8>=x&&j.get(0).style.removeAttribute("filter",!1)})};this.playContent=
function(b){if(a.groupGallery&&0<a.groupGallery.length)if(!0==b||!1!=b&&u.hasClass("play"))u.removeClass("play").addClass("pause"),A=setTimeout(function(){g.autoChangeContent(!0)},a.groupWait);else if(u.hasClass("pause")||!1==b)g.autoChangeContent(!1),u.removeClass("pause").addClass("play")};this.autoChangeContent=function(b){if(b){var c=function(){!g.nextContent(function(){clearTimeout(A);A=setTimeout(c,a.groupWait)})&&a.loop&&(z=-1,g.nextContent(),clearTimeout(A),A=setTimeout(c,a.groupWait))};c()}else clearTimeout(A)};
this.prevContent=function(b){if(a.groupGallery&&1<=a.groupGallery.length){var c=z-1;if(0<=c&&c<a.groupGallery.length){var f=a.groupGallery[c].url,e=a.groupGallery[c].title,f=f?f:"",e=e?e:"";k(a.effectIn,a.css3Effects,!1,!0,function(){g.setContent(f);G.text(e);E.text(c+1+"/"+a.groupGallery.length);z=c;k(a.effectIn,a.css3Effects,!0,!0);d.isFunction(b)&&b()});return!0}}return!1};this.nextContent=function(b){var c=z+1;if(a.groupGallery&&a.groupGallery.length>c&&0<=c){var f=a.groupGallery[c].url,e=a.groupGallery[c].title,
f=f?f:"",e=e?e:"";k(a.effectIn,a.css3Effects,!1,!0,function(){g.setContent(f);G.text(e);E.text(c+1+"/"+a.groupGallery.length);z=c;k(a.effectIn,a.css3Effects,!0,!0);d.isFunction(b)&&b()});return!0}return!1};this.setContent=function(h,c,f){var e=c?c:l(h);f=f?f:function(){};s.html("");b.css({"max-width":"","max-height":""});if("html"==e)s.html(h),a.onComplete(b.get(0),e),f(b.get(0),e),w.hide(),g.centerPopup();else if("image"==e)c=new Image,c.src=h,d(c).load(function(){a.onComplete(b.get(0),e);f(b.get(0),
e);w.hide();b.css({"max-width":d(this).width(),"max-height":d(this).height()});g.centerPopup()}),s.append(c);else if("ajax"==e)d.ajax({type:h.type,data:h.data,url:h.url,beforeSend:function(){},success:function(c){s.html(c);a.onComplete(b.get(0),e);f(b.get(0),e);w.hide();g.centerPopup()}});else if("iframe"==e)h=d(document.createElement("iframe")),h.attr("border",0),h.attr("frameBorder",0),h.attr("marginwidth",0),h.attr("marginheight",0),h.css({width:a.width,height:a.height}),h.get(0).src=a.href,h.load(function(){a.onComplete(b.get(0),
e);f(b.get(0),e);w.hide();b.css({"max-width":d(this).width(),"max-height":d(this).height()});g.centerPopup()}),s.append(h);else if("flash"==e){var j;c=a.width;var k=a.height,m=a.flashvars,m=m||""==m?"autostart=1&autoplay=1&fullscreenbutton=1":m,n;n='<object width="'+c+'" height="'+k+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+('<param name="movie" value="'+h+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="autostart" value="true" /><param name="autoplay" value="true" /><param name="flashvars" value="'+
m+'" /><param name="width" value="'+c+'" /><param name="height" value="'+k+'" />');n+='<embed src="'+h+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" autostart="true" autoplay="true" flashvars="'+m+'" wmode="transparent" width="'+c+'" height="'+k+'" style="margin: 0; padding: 0" />';n+="</object>";j=d(n);s.append(j);setTimeout(function(){a.onComplete(b.get(0),e);f(b.get(0),e);b.css({"max-width":"auto"!=a.width?a.width:j.width(),"max-height":"auto"!=a.height?
a.height:j.height()});g.centerPopup();w.hide()},80)}else s.html(h),a.onComplete(b.get(0),e),f(b.get(0),e),g.centerPopup(),w.hide()};this.width=function(a,c){var d=n;a&&(n=a,void 0==c||c?b.animate({width:a,left:Math.floor(a/2)},"slow"):b.css("width",a));return d};this.height=function(a,c){var d=r;a&&(r=a,void 0==c||c?b.animate({height:a,top:Math.floor(a/2)},"slow"):b.css("height",a));return d};return this}var x=function(){for(var a=3,d=document.createElement("div"),l=d.getElementsByTagName("i");d.innerHTML=
"\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",l[0];);return 4<a?a:null};d.fn.speedoPopup=function(a){a.href&&null==a.useFrame&&(a.useFrame=!0);if("random"==a.css3Effects){var k="none zoomIn zoomOut flip flipInHor flipInVer bounceIn pageTop flyIn fadeInScale scaleDown fadeSpin pulse leftSpeedIn rollIn rollOut pulseBody fadeSpinBody".split(" ");a.css3Effects=k[Math.floor(Math.random()*(k.length-1))]}a=d.extend(!0,{width:null,height:null,left:"center",top:"center",close:!0,closeCaption:"",theme:"default",
htmlContent:"<p> Default content </p>",esc:!0,overlay:{opacity:0.75,zindex:1E5},caption:null,href:null,overlayClose:!0,autoClose:!1,autoShow:!1,startCount:0,interval:30,effectIn:"none",effectOut:"none",css3Effects:!1,showOnEvent:"click",useFrame:!1,useAjax:!1,loadingImage:!1,unload:!1,draggable:!1,responsive:!0,ajaxContent:{url:"",type:"POST",data:null},groupGallery:!1,groupIndex:0,groupAutoPlay:!0,groupWait:5E3,loop:!0,buttons:null,onBeforeShow:function(){},onShow:function(){},onComplete:function(){},
onHide:function(){},onClose:function(){}},a);var l=null;!this.data("unique-speedo-instance")||a.unload?(l=new J(a),a.autoShow?setTimeout(function(){l.createPopup()},a.autoShow):l.createPopup(),l.init(),this.data("unique-speedo-instance",l)):(l=this.data("unique-speedo-instance"),a.autoShow?setTimeout(function(){l.showPopup()},a.autoShow):(l.showPopup(),l.centerPopup(),a.groupAutoPlay&&l.playContent(!0)));return l};d(function(){d.speedoPopup={};d.speedoPopup.smartSkins={};d.speedoPopup.browser_ie=
x;d.speedoPopup.registerSmartSkin=function(a,k){d.speedoPopup.smartSkins[a]=k};d(document).on("click",".speedo-popup",function(a){a.preventDefault();var k=d(this);a=k.attr("href");var l=[],m=k.attr("rel"),x=0;m&&""!=m&&d('.speedo-popup[rel="'+m+'"]').each(function(a){var g=d(this);g.get(0)==k.get(0)&&(x=a);l.push({url:g.attr("href"),title:g.attr("title")})});for(var m=a.split("+").join(" "),m=m.split("?")[1],F={},H=/[?&]?([^=]+)=([^&]*)/g,g;g=H.exec(m);)F[decodeURIComponent(g[1])]=decodeURIComponent(g[2]);
m=d.extend({htmlContent:!1,effectIn:"fade",effectOut:"fade"},F);m.useAjax&&(m.ajaxContent={url:a,type:"GET",data:null});0<l.length&&(m.groupGallery=l,m.groupIndex=x);m.href=a;d(this).speedoPopup(m)})})})(jQuery);